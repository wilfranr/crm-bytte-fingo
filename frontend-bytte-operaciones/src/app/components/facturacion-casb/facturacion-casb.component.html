<div class="grid">
  <div class="col-12">
    <div class="card">
      <h5>Facturaci√≥n CASB</h5>
      <p-toast></p-toast>

      <div class="flex align-items-center justify-content-center">
        <p-fileUpload
          mode="basic"
          name="file"
          url="http://localhost:3000/api/facturacionCasb/procesarCasb"
          accept=".xlsx,.xls"
          [maxFileSize]="1000000"
          (onSelect)="onSelectFile($event)"
          [auto]="true"
          chooseLabel="Seleccionar Archivo Excel"
          [disabled]="isLoading"
        >
        </p-fileUpload>
      </div>

      <div *ngIf="isLoading" class="flex flex-column align-items-center mt-4">
        <p-progressSpinner
          styleClass="w-4rem h-4rem"
          strokeWidth="8"
          fill="var(--surface-ground)"
          animationDuration=".5s"
        ></p-progressSpinner>
        <p class="mt-3">Procesando archivo, por favor espere...</p>
        <p-progressBar
          [value]="progressValue"
          [showValue]="false"
          class="w-full mt-2"
        ></p-progressBar>
      </div>

      <p-message
        *ngIf="message"
        [severity]="message.severity"
        [text]="message.text"
        class="mt-4"
      ></p-message>

      <div *ngIf="results" class="mt-4">
        <h6>Resultados del Procesamiento:</h6>
        <p>Enrolados Facturables: {{ results.enrolados }}</p>
        <p>No Enrolados Facturables: {{ results.noEnrolados }}</p>
      </div>
    </div>
  </div>
</div>
