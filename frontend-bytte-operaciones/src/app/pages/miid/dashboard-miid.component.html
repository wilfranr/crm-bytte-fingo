<!-- Loading State -->
<div class="flex justify-content-center align-items-center" *ngIf="loading && !error" style="min-height: 400px">
  <p-progressSpinner styleClass="w-2rem h-2rem" strokeWidth="4" animationDuration=".5s"></p-progressSpinner>
</div>

<!-- Error State -->
<p-message *ngIf="error && !loading" severity="error" [text]="error" styleClass="mb-4"></p-message>

<!-- Dashboard Content -->
<div class="dashboard-container" *ngIf="!loading && !error && dashboardData">
  <app-metric-cards-widget [dashboardData]="dashboardData"></app-metric-cards-widget>
</div>

<!-- Fila 1: Dos columnas para las gráficas -->
<div class="grid grid-cols-1 xl:grid-cols-2 gap-6 mt-6">
  <!-- Fila 1 Columna izquierda: Gráfica de comportamiento transaccional -->
  <div class="xl:col-span-1">
    <app-comportamiento-transaccional-widget [dashboardData]="dashboardData" />
  </div>
  
  <!-- Fila 1 Columna derecha: Widget de transacciones por hora -->
  <div class="xl:col-span-1">
    <app-transacciones-por-hora-widget [transacciones]="dashboardData?.transaccionesDetalle || []"></app-transacciones-por-hora-widget>
  </div>
</div>

<!-- Fila 2: Una columna para la tabla de transacciones -->
<div class="mt-6">
  <!-- Fila 2 Columna única: Widget de transacciones -->
  <app-transacciones-widget [transacciones]="dashboardData?.transaccionesDetalle || []"></app-transacciones-widget>
</div>

<!-- Botón de actualización manual -->
<button pButton pRipple
        icon="pi pi-sync"
        class="p-button-rounded p-button-info refresh-button"
        [disabled]="loading"
        (click)="loadDashboardData(true)"
        pTooltip="Actualizar datos"
        tooltipPosition="left">
</button>
