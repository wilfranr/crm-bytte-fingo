<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Documentación</title>
<style>
body{font-family:Arial,Helvetica,sans-serif;max-width:800px;margin:auto;padding:20px;}
#search{width:100%;padding:8px;margin-bottom:20px;}
pre{background:#f4f4f4;padding:10px;overflow:auto;}
section{margin-bottom:40px;}
ul,ol{margin-left:20px;}
</style>
</head>
<body>
<h1>Documentación</h1>
<input id="search" placeholder="Buscar..." />
<section class="doc-section"><h2>Proyecto</h2><h1>CRM Bytte Operaciones</h1><p>Este proyecto contiene un backend en Node.js y un frontend en Angular.</p><h2>Variables de entorno</h2><p>El backend utiliza la biblioteca [`dotenv`](https://github.com/motdotla/dotenv) para cargar variables de entorno desde un archivo `.env` ubicado en la carpeta `backend-bytte-operaciones`.</p><ol><li>Copia el archivo `.env.example` y renómbralo a `.env`:</li></ol><p>   ```bash</p><p>   cp backend-bytte-operaciones/.env.example backend-bytte-operaciones/.env</p><p>   ```</p><ol><li>Actualiza los valores de `MONGODB_URI` y `SECRET_KEY` según tu configuración.</li></ol><p>El valor `MONGODB_URI` debe contener la cadena de conexión de MongoDB, por ejemplo:</p><pre><code>MONGODB_URI=mongodb+srv://usuario:contraseña@host/tu-base?retryWrites=true&w=majority&appName=ClusterBytte
</code></pre><p>Una vez configurado el archivo `.env`, instala las dependencias y arranca el backend con:</p><pre><code>npm install --prefix backend-bytte-operaciones
npm --prefix backend-bytte-operaciones start
</code></pre><p>El frontend se encuentra en la carpeta `frontend-bytte-operaciones` y puede iniciarse con:</p><pre><code>npm install --prefix frontend-bytte-operaciones
npm --prefix frontend-bytte-operaciones start
</code></pre><p>La URL base del API se configura en `frontend-bytte-operaciones/src/environments/environment.ts`.</p><p>Si prefieres ejecutar backend y frontend al mismo tiempo, instala las dependencias en la raíz y usa:</p><pre><code>npm install
npm start
</code></pre><p>Esto ejecutará los dos proyectos de manera concurrente.</p><h2>Autenticación con cookies</h2><p>Al iniciar sesión, el backend emite dos cookies HTTP-only:</p><ul><li>`accessToken` – token de acceso con expiración corta.</li><li>`refreshToken` – token para obtener un nuevo `accessToken` sin volver a ingresar credenciales.</li></ul><p>Ambas cookies se crean con los atributos `HttpOnly` y `SameSite=Strict`, por lo que no son accesibles desde JavaScript. Para renovar la sesión se expone la ruta `POST /api/auth/refresh`, que devuelve un nuevo `accessToken` si el `refreshToken` es válido.</p><p>El frontend guarda únicamente la información pública del usuario en `localStorage` y envía las cookies automáticamente en cada petición gracias a la configuración `withCredentials` del interceptor HTTP.</p></section>
<section class="doc-section"><h2>Frontend</h2><h1>FrontendBytteOperaciones</h1><p>This project was generated using [Angular CLI](https://github.com/angular/angular-cli) version 19.0.7.</p><h2>Development server</h2><p>To start a local development server, run:</p><pre><code>ng serve
</code></pre><p>Once the server is running, open your browser and navigate to `http://localhost:4200/`. The application will automatically reload whenever you modify any of the source files.</p><h2>API endpoint</h2><p>The base URL of the backend API is defined in `src/environments/environment.ts` and `src/environments/environment.prod.ts`. Update these files if your backend runs on a different host or port.</p><h2>Code scaffolding</h2><p>Angular CLI includes powerful code scaffolding tools. To generate a new component, run:</p><pre><code>ng generate component component-name
</code></pre><p>For a complete list of available schematics (such as `components`, `directives`, or `pipes`), run:</p><pre><code>ng generate --help
</code></pre><h2>Building</h2><p>To build the project run:</p><pre><code>ng build
</code></pre><p>This will compile your project and store the build artifacts in the `dist/` directory. By default, the production build optimizes your application for performance and speed.</p><h2>Running unit tests</h2><p>To execute unit tests with the [Karma](https://karma-runner.github.io) test runner, use the following command:</p><pre><code>ng test
</code></pre><h2>Running end-to-end tests</h2><p>For end-to-end (e2e) testing, run:</p><pre><code>ng e2e
</code></pre><p>Angular CLI does not come with an end-to-end testing framework by default. You can choose one that suits your needs.</p><h2>Additional Resources</h2><p>For more information on using the Angular CLI, including detailed command references, visit the [Angular CLI Overview and Command Reference](https://angular.dev/tools/cli) page.</p></section><script>
const input=document.getElementById('search');
input.addEventListener('input',()=>{
  const term=input.value.toLowerCase();
  document.querySelectorAll('.doc-section').forEach(sec=>{
    sec.style.display=sec.innerText.toLowerCase().includes(term)?'':'none';
  });
});
</script>
</body>
</html>
